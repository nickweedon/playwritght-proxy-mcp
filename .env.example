# Playwright MCP Proxy Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# Playwright Browser Configuration
# =============================================================================

# Browser to use: chromium, firefox, webkit, msedge
PLAYWRIGHT_BROWSER=chromium

# Run browser in headless mode (true/false)
PLAYWRIGHT_HEADLESS=true

# Capabilities to enable (comma-separated): vision, pdf, testing, tracing
PLAYWRIGHT_CAPS=vision,pdf

# Output directory for playwright artifacts
PLAYWRIGHT_OUTPUT_DIR=/app/playwright-output

# Save session data between runs (true/false)
PLAYWRIGHT_SAVE_SESSION=true

# Save execution traces (true/false)
PLAYWRIGHT_SAVE_TRACE=false

# Timeout for actions in milliseconds
PLAYWRIGHT_TIMEOUT_ACTION=5000

# Timeout for navigation in milliseconds
PLAYWRIGHT_TIMEOUT_NAVIGATION=60000

# Image responses: allow or omit
PLAYWRIGHT_IMAGE_RESPONSES=allow

# =============================================================================
# Optional Playwright Configuration
# =============================================================================

# Device emulation (e.g., "iPhone 13", "Pixel 5")
# PLAYWRIGHT_DEVICE=

# Viewport size (e.g., "1920x1080")
# PLAYWRIGHT_VIEWPORT_SIZE=

# User data directory for persistent browser profile
# PLAYWRIGHT_USER_DATA_DIR=

# Storage state file for session persistence
# PLAYWRIGHT_STORAGE_STATE=

# Network filtering
# PLAYWRIGHT_ALLOWED_ORIGINS=https://*.example.com
# PLAYWRIGHT_BLOCKED_ORIGINS=https://ads.example.com

# Proxy server
# PLAYWRIGHT_PROXY_SERVER=http://proxy.example.com:8080

# Save video recording (on, off, retain-on-failure)
# PLAYWRIGHT_SAVE_VIDEO=

# =============================================================================
# Stealth Configuration (Anti-Detection)
# =============================================================================

# Enable stealth mode with bundled anti-detection script (true/false)
# When enabled, automatically injects stealth.js to hide automation markers
PLAYWRIGHT_STEALTH_MODE=false

# Custom user agent string (overrides default browser user agent)
# Example: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36
# PLAYWRIGHT_USER_AGENT=

# Custom initialization script path (overrides bundled stealth.js if PLAYWRIGHT_STEALTH_MODE=true)
# Script runs before any page scripts execute
# PLAYWRIGHT_INIT_SCRIPT=/path/to/custom-script.js

# Ignore HTTPS certificate errors (true/false)
# Useful for testing with self-signed certificates
PLAYWRIGHT_IGNORE_HTTPS_ERRORS=false

# =============================================================================
# Browser Extension Mode
# =============================================================================

# Enable browser extension support (true/false)
# When enabled, allows browser extensions to connect and control the browser
# Requires PLAYWRIGHT_MCP_EXTENSION_TOKEN to be set
PLAYWRIGHT_EXTENSION=false

# Extension authentication token
# Required when PLAYWRIGHT_EXTENSION=true
# PLAYWRIGHT_MCP_EXTENSION_TOKEN=your-token-here

# Share browser context across tool calls (true/false)
# IMPORTANT: This is incompatible with extension mode in @playwright/mcp@0.0.54
# When extension=true and shared_browser_context=true, the proxy will automatically
# disable shared_browser_context to prevent browser context lifecycle conflicts
# PLAYWRIGHT_SHARED_BROWSER_CONTEXT=false

# =============================================================================
# WSL -> Windows Host Connection
# =============================================================================

# Enable WSL->Windows mode by specifying the Windows host IP address
# When set, automatically uses Windows Node.js (npx.cmd) and connects to Windows host
#
# To find your Windows host IP from WSL:
#   ip route show | grep -i default | awk '{ print $3}'
#   # Common values: 172.22.96.1, 172.18.0.1, etc.
#
# What happens when this is set:
# 1. Uses 'cmd.exe /c npx.cmd' to run Windows Node.js from WSL
# 2. Upstream server binds to the specified Windows host IP
# 3. Proxy connects to the specified Windows host IP
#
# When NOT set (standard mode):
# 1. Uses 'npx' from PATH (native Linux/WSL Node.js)
# 2. Upstream server binds to 127.0.0.1 (localhost only)
# 3. Proxy connects to 127.0.0.1
#
# Example:
#   PLAYWRIGHT_WSL_HOST_CONNECT=172.22.96.1
#
# PLAYWRIGHT_WSL_HOST_CONNECT=

# =============================================================================
# Blob Storage Configuration
# =============================================================================

# Root directory for blob storage
BLOB_STORAGE_ROOT=/mnt/blob-storage

# Maximum size per blob in MB
BLOB_MAX_SIZE_MB=500

# Time-to-live for blobs in hours
BLOB_TTL_HOURS=24

# Size threshold in KB for using blob storage (vs inline)
BLOB_SIZE_THRESHOLD_KB=50

# Cleanup interval in minutes
BLOB_CLEANUP_INTERVAL_MINUTES=60

# =============================================================================
# Proxy Configuration
# =============================================================================

# Enable debug logging (true/false)
PROXY_DEBUG=false
